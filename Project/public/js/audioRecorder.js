var blob;let log=console.log.bind(console),id=e=>document.getElementById(e),startRecording=id("chat-audio-record"),stream,recorder,counter=1,chunks,media;function appendAudio(){let e=new Blob(chunks,{type:media.type});url=URL.createObjectURL(e),null==(mt=document.getElementById("chat-audio-recording"))&&(mt=document.createElement(media.tag)),mt.id="chat-audio-recording",mt.controls=!0,mt.src=url,document.querySelector(".chat-audio-controllers").appendChild(mt);let a=document.getElementById("chat-media-input");console.log(a);let t=new File([e],"audio.mp3",{type:"audio/mp3"}),i=new DataTransfer;i.items.add(t),a.files=i.files,console.log(a.files)}null!=startRecording&&(startRecording.onclick=e=>{let a=document.getElementById("chat-audio-record");if("chat-audio-stop"==a.className){a.className="chat-audio-start",a.innerHTML='<i class="fa fa-microphone" aria-hidden="true"></i> START RECORDING',recorder.stop();return}media={tag:"audio",type:"audio/mp3",ext:".mp3",gUM:{audio:!0}},navigator.mediaDevices.getUserMedia(media.gUM).then(e=>{stream=e,(recorder=new MediaRecorder(stream)).ondataavailable=e=>{chunks.push(e.data),"inactive"==recorder.state&&appendAudio()},a.className="chat-audio-stop",a.innerHTML='<i class="fa fa-microphone-slash" aria-hidden="true"></i> STOP RECORDING',chunks=[],recorder.start(),log("got media successfully")}).catch(log)});